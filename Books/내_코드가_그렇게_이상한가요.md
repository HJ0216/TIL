# ë‚´ ì½”ë“œê°€ ê·¸ë ‡ê²Œ ì´ìƒí•œê°€ìš”?

ğŸ“– 2024.03.11 -


## 3ì¥ í´ë˜ìŠ¤ ì„¤ê³„: ëª¨ë“  ê²ƒê³¼ ì—°ê²°ë˜ëŠ” ì„¤ê³„ ê¸°ë°˜

### 3.2 ì„±ìˆ™í•œ í´ë˜ìŠ¤ë¡œ ì„±ì¥ì‹œí‚¤ëŠ” ì„¤ê³„ ê¸°ë²•

```java
class Money{
    int amount;
    Currency currency;
}
```

<br/>

â­ ìƒì„±ìë¡œ í™•ì‹¤í•˜ê²Œ ì´ˆê¸°ê°’ ì „ë‹¬ë°›ê¸°
```java
class Money{
    int amount;
    Currency currency;

    Money(int amount, Currency currency){
        this.amount = amount;
        this.currency = currency;
    }
}
```

<br/>


â­ ìƒì„±ìë¡œ ì „ë‹¬ë˜ëŠ” ì´ˆê¸°ê°’ ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
```java
class Money{
    int amount;
    Currency currency;

    Money(int amount, Currency currency){
        if(amount < 0){
            throw new IllegalArgumentException("ê¸ˆì•¡ì€ 0 ì´ìƒì˜ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }
        if(currency == null){
            throw new NullPointerException("í†µí™” ë‹¨ìœ„ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”.");
        }

        this.amount = amount;
        this.currency = currency;
    }
}
```

<br/>

â­ ë°ì´í„°ì™€ ê´€ë ¨ëœ ê³„ì‚° ë¡œì§ ì¶”ê°€
```java
class Money{
    // ìƒëµ
    
    void add(int other){
        amount += other;
    }
}
```

<br/>

â­ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ë¶ˆë³€ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ ë°©ì–´
```java
class Money{
    final int amount;
    final Currency currency;
    
    // ìƒëµ
}
```

<br/>

â­ ë¶ˆë³€ê°’ì˜ ë³€ê²½ì´ í•„ìš”í•  ê²½ìš°, ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ê¸°
```java
class Money{
    // ìƒëµ

    Money add(int other){
        int added = amount + other;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ë§¤ê°œë³€ìˆ˜ ë° ì§€ì—­ë³€ìˆ˜ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ ë°©ì–´
```java
class Money{
    // ìƒëµ

    Money add(final int other){
        final int added = amount + other;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ì—‰ëš±í•œ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•Šë„ë¡ ìë£Œí˜•ì„ ì§€ì •í•˜ê¸°
```java
class Money{
    // ìƒëµ

    Money add(final Money other){
        final int added = amount + other.amount;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ë©”ì„œë“œ ë¡œì§ì— ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
```java
class Money{
    // ìƒëµ

    Money add(final Money other){
        if(!currency.equals(other.currency)){
            throw new IllegalArgumentException("í†µí™” ë‹¨ìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.");
        }

        final int added = amount + other.amount;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ì˜ë¯¸ì—†ëŠ” ë©”ì„œë“œëŠ” ì¶”ê°€í•˜ì§€ ì•Šê¸°

<br/>

ğŸ«  ìµœì¢…
```java
class Money{
    final int amount;
    final Currency currency;

    Money(final int amount, final Currency currency){
        if(amount < 0){
            throw new IllegalArgumentException("ê¸ˆì•¡ì€ 0 ì´ìƒì˜ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }

        if(currency == null){
            throw new NullPointerException("í†µí™” ë‹¨ìœ„ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”.");
        }

        this.amount = amount;
        this.currency = currency;
    }

    Money add(final Money other){
        if(!currency.equals(other.currency)){
            throw new IllegalArgumentException("í†µí™” ë‹¨ìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.");
        }

        final int added = amount + other.amount;
        return new Money(added, currency);
    }
}
```



## 4ì¥ ë¶ˆë³€ í™œìš©í•˜ê¸°: ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ê²Œ ë§Œë“¤ê¸°
### 4.1 ì¬í• ë‹¹
```java
int damage(){
    int tmp = member.power() + member.weaponAttack();
    tmp = (int)(tmp * (1f + member.speed() / 100f));
    tmp = tmp - (int)(enemy.defense / 2);
    tmp = Math.max(0, tmp);
}
```

<br/>

â­ ë¶ˆë³€ ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ì„œ ì¬í• ë‹¹ ë§‰ê¸°
```java
int damage(){
    final int basicAttackPower = member.power() + member.weaponAttack();
    final int finalAttackPower = (int)(basicAttackPower * (1f + member.speed() / 100f));
    final int reduction = (int)(enemy.defense / 2);
    final int damage = Math.max(0, finalAttackPower - reduction);

    return damage;
}
```

<br/>

ğŸš¨ ê°€ë³€ìœ¼ë¡œ ì¸í•œ ì˜ë„ì¹˜ ì•Šì€ ì˜í–¥ ìœ ì˜
```java
class AttackPower{
    static final int MIN = 0;
    int value;

    AttackPower(int value){
        if(value < MIN){
            throw new ILLegalArgumentException();
        }

        this.value = value;
    }
}

class Weapon{
    final AttackPower attackPower;

    Weapon(AttackPower attackPower){
        this.attackPower = attackPower;
    }
}


// ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•  ê²½ìš°,

AttackPower attackPower = new AttackPower(20);
Weapon weaponA = new Weapon(attackPower);
Weapon weaponB = new Weapon(attackPower);

weaponA.attackPower.value = 25;

System.out.println("Weapon A attack power: " + weaponA.attackPower.value); // 25
System.out.println("Weapon B attack power: " + weaponB.attackPower.value); // 25


// ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ìƒì„±í•œ ê²½ìš°,
AttackPower attackPowerA = new AttackPower(20);
AttackPower attackPowerB = new AttackPower(20);

Weapon weaponA = new Weapon(attackPowerA);
Weapon weaponB = new Weapon(attackPowerB);

weaponA.attackPower.value += 5;
System.out.println("Weapon A attack power: " + weaponA.attackPower.value); // 25
System.out.println("Weapon B attack power: " + weaponB.attackPower.value); // 20
```

<br/>

```java
class AttackPower{
    static final int MIN = 0;
    int value;

    AttackPower(int value){
        if(value < MIN){
            throw new IllegalArgumentException();
        }

        this.value = value;
    }

    void reinforce(int increment){
        value += increment;
    }

    void disable(){
        value = MIN;
    }
}

AttackPower attackPower = new AttackPower(20);
attackPower.reinforce(15);
System.out.println("attackPower.value: " + attackPower.value); // 35

// ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë©”ì„œë“œ í˜¸ì¶œ
attackPower.disable();
System.out.println("attackPower.value: " + attackPower.value); // 0
```

<br/>

ğŸš¨ ë©”ì„œë“œ
- ì£¼ìš” ì‘ìš©: ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬ë°›ê³ , ê°’ì„ ë¦¬í„´
- ë¶€ìˆ˜ íš¨ê³¼: ì£¼ìš” ì‘ìš© ì´ì™¸ì˜ ìƒíƒœ ë³€ê²½ì„ ì¼ìœ¼í‚¤ëŠ” ê²ƒ
    - ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ë³€ê²½
    - ì „ì—­ë³€ìˆ˜ ë³€ê²½
    - ë§¤ê°œë³€ìˆ˜ ë³€ê²½
    - íŒŒì¼ ì½ê³  ì“°ê¸°ì™€ ê°™ì€ I/O ì¡°ì‘
â­ í•¨ìˆ˜ì˜ ì˜í–¥ ë²”ìœ„ í•œì •í•˜ê¸°
- ë°ì´í„°(ìƒíƒœ)ëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ê¸°
- ìƒíƒœ ë³€ê²½í•˜ì§€ ì•Šê¸°
- ê°’ì€ í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ìœ¼ë¡œ ëŒë ¤ì£¼ê¸°

<br/>

â­ ê°’ì„ ë¶ˆë³€ìœ¼ë¡œ ë°”ê¾¸ê¸°
```java
class AttackPower{
    static final int MIN = 0;
    final int value;

    AttackPower(final int value){
        if(value < MIN){
            throw new IllegalArgumentException();
        }

        this.value = value;
    }

    AttackPower reinforce(final AttackPower increment){
        return new AttackPower(this.value + increment.value);
    }

    AttackPower disable(){
        return new AttackPower(MIN);
    }
}
```

<br/>

```java
class Weapon{
    final AttackPower attackPower;

    Weapon(final AttackPower attackPower){
        this.attackPower = attackPower;
    }

    Weapon reinforce(final AttackPower increment){
        final AttackPower reinforced = attackPower.reinforce(increment);
        return new Weapon(reinforced);
    }
}
```

<br/>

```java
final AttackPower attackPowerA = new AttackPower(20);
final AttackPower attackPowerB = new AttackPower(20);

final Weapon weaponA = new Weapon(attackPowerA);
final Weapon weaponB = new Weapon(attackPowerB);

final AttackPower increment = new AttackPower(5);
final Weapon reinforceWeaponA = weaponA.reinforce(increment);

System.out.println("Weapon A attack power: " + weaponA.attackPower.value); // 20
System.out.println("Reinforced Weapon A attack power: " + reinforcedWeaponA.attackPower.value); // 25
System.out.println("Weapon B attack power: " + weaponB.attackPower.value); // 20
```

<br/>

â­ ê¸°ë³¸ì ìœ¼ë¡œ ë¶ˆë³€ìœ¼ë¡œ
- ë³€ìˆ˜ì˜ ì˜ë¯¸ê°€ ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í˜¼ë€ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
- ë™ì‘ì´ ì•ˆì •ì ì´ê²Œ ë˜ë¯€ë¡œ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ê¸° ì‰¬ì›€
- ì½”ë“œì˜ ì˜í–¥ ë²”ìœ„ê°€ í•œì •ì ì´ë¯€ë¡œ ìœ ì§€ë³´ìˆ˜ê°€ í¸ë¦¬í•´ì§

<br/>

cf. Mutater: ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ë©”ì„œë“œ
```java
class HitPoint{
    private static final int MIN = 0;
    int amount;

    HitPoint(final int amount){
        if(amount < MIN){
            throw new IllegalArgumentException();
        }

        this.amount = amount;
    }

    void damage(final int damageAmount){
        final int nextAmount = amount - damageAmount;
        amount = Math.max(MIN, nextAmount);
    }

    boolean isZero(){
        return amount == MIN;
    }
}

class Member{
    final HitPoint hitPoint;
    final States states;

    void damage(final int damageAmount){
        hitPoint.damage(damageAmount);
        if(hitPoint.isZero()){
            states.add(StateType.dead);
        }
    }
}
```