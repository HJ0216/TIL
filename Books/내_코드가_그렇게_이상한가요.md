# ë‚´ ì½”ë“œê°€ ê·¸ë ‡ê²Œ ì´ìƒí•œê°€ìš”?

ğŸ“– 2024.03.11 -


## 3ì¥ í´ë˜ìŠ¤ ì„¤ê³„: ëª¨ë“  ê²ƒê³¼ ì—°ê²°ë˜ëŠ” ì„¤ê³„ ê¸°ë°˜

### 3.2 ì„±ìˆ™í•œ í´ë˜ìŠ¤ë¡œ ì„±ì¥ì‹œí‚¤ëŠ” ì„¤ê³„ ê¸°ë²•

```java
class Money{
    int amount;
    Currency currency;
}
```

<br/>

â­ ìƒì„±ìë¡œ í™•ì‹¤í•˜ê²Œ ì´ˆê¸°ê°’ ì „ë‹¬ë°›ê¸°
```java
class Money{
    int amount;
    Currency currency;

    Money(int amount, Currency currency){
        this.amount = amount;
        this.currency = currency;
    }
}
```

<br/>


â­ ìƒì„±ìë¡œ ì „ë‹¬ë˜ëŠ” ì´ˆê¸°ê°’ ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
```java
class Money{
    int amount;
    Currency currency;

    Money(int amount, Currency currency){
        if(amount < 0){
            throw new IllegalArgumentException("ê¸ˆì•¡ì€ 0 ì´ìƒì˜ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }
        if(currency == null){
            throw new NullPointerException("í†µí™” ë‹¨ìœ„ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”.");
        }

        this.amount = amount;
        this.currency = currency;
    }
}
```

<br/>

â­ ë°ì´í„°ì™€ ê´€ë ¨ëœ ê³„ì‚° ë¡œì§ ì¶”ê°€
```java
class Money{
    // ìƒëµ
    
    void add(int other){
        amount += other;
    }
}
```

<br/>

â­ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ë¶ˆë³€ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ ë°©ì–´
```java
class Money{
    final int amount;
    final Currency currency;
    
    // ìƒëµ
}
```

<br/>

â­ ë¶ˆë³€ê°’ì˜ ë³€ê²½ì´ í•„ìš”í•  ê²½ìš°, ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ê¸°
```java
class Money{
    // ìƒëµ

    Money add(int other){
        int added = amount + other;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ë§¤ê°œë³€ìˆ˜ ë° ì§€ì—­ë³€ìˆ˜ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ ë°©ì–´
```java
class Money{
    // ìƒëµ

    Money add(final int other){
        final int added = amount + other;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ì—‰ëš±í•œ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•Šë„ë¡ ìë£Œí˜•ì„ ì§€ì •í•˜ê¸°
```java
class Money{
    // ìƒëµ

    Money add(final Money other){
        final int added = amount + other.amount;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ë©”ì„œë“œ ë¡œì§ì— ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
```java
class Money{
    // ìƒëµ

    Money add(final Money other){
        if(!currency.equals(other.currency)){
            throw new IllegalArgumentException("í†µí™” ë‹¨ìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.");
        }

        final int added = amount + other.amount;
        return new Money(added, currency);
    }
}
```

<br/>

â­ ì˜ë¯¸ì—†ëŠ” ë©”ì„œë“œëŠ” ì¶”ê°€í•˜ì§€ ì•Šê¸°

<br/>

ğŸ«  ìµœì¢…
```java
class Money{
    final int amount;
    final Currency currency;

    Money(final int amount, final Currency currency){
        if(amount < 0){
            throw new IllegalArgumentException("ê¸ˆì•¡ì€ 0 ì´ìƒì˜ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }

        if(currency == null){
            throw new NullPointerException("í†µí™” ë‹¨ìœ„ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”.");
        }

        this.amount = amount;
        this.currency = currency;
    }

    Money add(final Money other){
        if(!currency.equals(other.currency)){
            throw new IllegalArgumentException("í†µí™” ë‹¨ìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.");
        }

        final int added = amount + other.amount;
        return new Money(added, currency);
    }
}
```



## 4ì¥ ë¶ˆë³€ í™œìš©í•˜ê¸°: ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ê²Œ ë§Œë“¤ê¸°
### 4.1 ì¬í• ë‹¹
```java
int damage(){
    int tmp = member.power() + member.weaponAttack();
    tmp = (int)(tmp * (1f + member.speed() / 100f));
    tmp = tmp - (int)(enemy.defense / 2);
    tmp = Math.max(0, tmp);
}
```

<br/>

â­ ë¶ˆë³€ ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ì„œ ì¬í• ë‹¹ ë§‰ê¸°
```java
int damage(){
    final int basicAttackPower = member.power() + member.weaponAttack();
    final int finalAttackPower = (int)(basicAttackPower * (1f + member.speed() / 100f));
    final int reduction = (int)(enemy.defense / 2);
    final int damage = Math.max(0, finalAttackPower - reduction);

    return damage;
}
```

<br/>

ğŸš¨ ê°€ë³€ìœ¼ë¡œ ì¸í•œ ì˜ë„ì¹˜ ì•Šì€ ì˜í–¥ ìœ ì˜
```java
class AttackPower{
    static final int MIN = 0;
    int value;

    AttackPower(int value){
        if(value < MIN){
            throw new ILLegalArgumentException();
        }

        this.value = value;
    }
}

class Weapon{
    final AttackPower attackPower;

    Weapon(AttackPower attackPower){
        this.attackPower = attackPower;
    }
}


// ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•  ê²½ìš°,

AttackPower attackPower = new AttackPower(20);
Weapon weaponA = new Weapon(attackPower);
Weapon weaponB = new Weapon(attackPower);

weaponA.attackPower.value = 25;

System.out.println("Weapon A attack power: " + weaponA.attackPower.value); // 25
System.out.println("Weapon B attack power: " + weaponB.attackPower.value); // 25


// ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ìƒì„±í•œ ê²½ìš°,
AttackPower attackPowerA = new AttackPower(20);
AttackPower attackPowerB = new AttackPower(20);

Weapon weaponA = new Weapon(attackPowerA);
Weapon weaponB = new Weapon(attackPowerB);

weaponA.attackPower.value += 5;
System.out.println("Weapon A attack power: " + weaponA.attackPower.value); // 25
System.out.println("Weapon B attack power: " + weaponB.attackPower.value); // 20
```

<br/>

```java
class AttackPower{
    static final int MIN = 0;
    int value;

    AttackPower(int value){
        if(value < MIN){
            throw new IllegalArgumentException();
        }

        this.value = value;
    }

    void reinforce(int increment){
        value += increment;
    }

    void disable(){
        value = MIN;
    }
}

AttackPower attackPower = new AttackPower(20);
attackPower.reinforce(15);
System.out.println("attackPower.value: " + attackPower.value); // 35

// ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë©”ì„œë“œ í˜¸ì¶œ
attackPower.disable();
System.out.println("attackPower.value: " + attackPower.value); // 0
```

<br/>

ğŸš¨ ë©”ì„œë“œ
- ì£¼ìš” ì‘ìš©: ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬ë°›ê³ , ê°’ì„ ë¦¬í„´
- ë¶€ìˆ˜ íš¨ê³¼: ì£¼ìš” ì‘ìš© ì´ì™¸ì˜ ìƒíƒœ ë³€ê²½ì„ ì¼ìœ¼í‚¤ëŠ” ê²ƒ
    - ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ë³€ê²½
    - ì „ì—­ë³€ìˆ˜ ë³€ê²½
    - ë§¤ê°œë³€ìˆ˜ ë³€ê²½
    - íŒŒì¼ ì½ê³  ì“°ê¸°ì™€ ê°™ì€ I/O ì¡°ì‘

â­ í•¨ìˆ˜ì˜ ì˜í–¥ ë²”ìœ„ í•œì •í•˜ê¸°
- ë°ì´í„°(ìƒíƒœ)ëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ê¸°
- ìƒíƒœ ë³€ê²½í•˜ì§€ ì•Šê¸°
- ê°’ì€ í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ìœ¼ë¡œ ëŒë ¤ì£¼ê¸°

<br/>

â­ ê°’ì„ ë¶ˆë³€ìœ¼ë¡œ ë°”ê¾¸ê¸°
```java
class AttackPower{
    static final int MIN = 0;
    final int value;

    AttackPower(final int value){
        if(value < MIN){
            throw new IllegalArgumentException();
        }

        this.value = value;
    }

    AttackPower reinforce(final AttackPower increment){
        return new AttackPower(this.value + increment.value);
    }

    AttackPower disable(){
        return new AttackPower(MIN);
    }
}
```

<br/>

```java
class Weapon{
    final AttackPower attackPower;

    Weapon(final AttackPower attackPower){
        this.attackPower = attackPower;
    }

    Weapon reinforce(final AttackPower increment){
        final AttackPower reinforced = attackPower.reinforce(increment);
        return new Weapon(reinforced);
    }
}
```

<br/>

```java
final AttackPower attackPowerA = new AttackPower(20);
final AttackPower attackPowerB = new AttackPower(20);

final Weapon weaponA = new Weapon(attackPowerA);
final Weapon weaponB = new Weapon(attackPowerB);

final AttackPower increment = new AttackPower(5);
final Weapon reinforceWeaponA = weaponA.reinforce(increment);

System.out.println("Weapon A attack power: " + weaponA.attackPower.value); // 20
System.out.println("Reinforced Weapon A attack power: " + reinforcedWeaponA.attackPower.value); // 25
System.out.println("Weapon B attack power: " + weaponB.attackPower.value); // 20
```

<br/>

â­ ê¸°ë³¸ì ìœ¼ë¡œ ë¶ˆë³€ìœ¼ë¡œ
- ë³€ìˆ˜ì˜ ì˜ë¯¸ê°€ ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í˜¼ë€ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
- ë™ì‘ì´ ì•ˆì •ì ì´ê²Œ ë˜ë¯€ë¡œ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ê¸° ì‰¬ì›€
- ì½”ë“œì˜ ì˜í–¥ ë²”ìœ„ê°€ í•œì •ì ì´ë¯€ë¡œ ìœ ì§€ë³´ìˆ˜ê°€ í¸ë¦¬í•´ì§

<br/>

cf. Mutater: ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ë©”ì„œë“œ
```java
class HitPoint{
    private static final int MIN = 0;
    int amount;

    HitPoint(final int amount){
        if(amount < MIN){
            throw new IllegalArgumentException();
        }

        this.amount = amount;
    }

    void damage(final int damageAmount){
        final int nextAmount = amount - damageAmount;
        amount = Math.max(MIN, nextAmount);
    }

    boolean isZero(){
        return amount == MIN;
    }
}

class Member{
    final HitPoint hitPoint;
    final States states;

    void damage(final int damageAmount){
        hitPoint.damage(damageAmount);
        if(hitPoint.isZero()){
            states.add(StateType.dead);
        }
    }
}
```



## 5ì¥ ì‘ì§‘ë„: í©ì–´ì ¸ ìˆëŠ” ê²ƒë“¤
â­ ì‘ì§‘ë„: í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ë°ì´í„°ì™€ ë¡œì§ì˜ ê´€ê³„ê°€ ì–¼ë§ˆë‚˜ ê°•í•œì§€ ë‚˜íƒ€ë‚´ëŠ” ì§€í‘œ
### 5.1 static ë©”ì„œë“œ ì˜¤ìš©
```java
class OrderManager{
    static int add(int moneyAmount1, int moneyAmount2){
        return moneyAMount1 + moneyAmount2;
    }
}
```
ğŸš¨ static ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´, ë°ì´í„°ì™€ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ëŠ” ë¡œì§ ì‚¬ì´ì— ê´´ë¦¬ê°€ ìƒê²¨ ì‘ì§‘ë„ê°€ ë‚®ì•„ì§ˆ ìˆ˜ ìˆìŒ

```java
class PaymentManager{
    private int discountRate;

    int add(int moneyAmount1, int moneyAmount2){
        return moneyAmount1 + moneyAmount2;
    }
}
```
ğŸš¨ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œëŠ” static ë©”ì„œë“œì™€ ë™ì¼í•œ ê¸°ëŠ¥  
â†’ ë©”ì„œë“œ ì•ì— static ì¶”ê°€ ì‹œ, ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì¸ ì²™ í•˜ëŠ” static ë©”ì„œë“œ

â­ static ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ìƒí™©
* ë¡œê·¸ ì¶œë ¥ ì „ìš© ë©”ì„œë“œ
* í¬ë§· ì „í™˜ ì „ìš© ë©”ì„œë“œ
ë“± ì‘ì§‘ë„ì™€ ê´€ê³„ì—†ëŠ” ê¸°ëŠ¥

### 5.2 ì´ˆê¸°í™” ë¡œì§ ë¶„ì‚°
```java
class GiftPoint{
    private static final int MIN_POINT = 0;
    final int value;

    GiftPoint(final int point){
        if(point < MIN_POINT){
            throw new IllegalArgumentException("í¬ì¸íŠ¸ë¥¼ 0 ì´ìƒ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
        }

        value = point;
    }

    /**
     * í¬ì¸íŠ¸ ì¶”ê°€í•˜ê¸°
     * 
     * @param other ì¶”ê°€ í¬ì¸íŠ¸
     * @return ì¶”ê°€ í›„ ë‚¨ì€ í¬ì¸íŠ¸
    */
    GiftPoint add(final GiftPoint other){
        return new GiftPoint(value + other.value);
    }

    /**
     * @return ë‚¨ì€ í¬ì¸íŠ¸ê°€ ì†Œë¹„ í¬ì¸íŠ¸ ì´ìƒì´ë¼ë©´ true
    */
    boolean isEnough(final ConsumptionPoint point){
        return point.value <= value;
    }

    /**
     * í¬ì¸íŠ¸ ì†Œë¹„í•˜ê¸°
     * 
     * @param point ì†Œë¹„ í¬ì¸íŠ¸
     * @return ì†Œë¹„ í›„ ë‚¨ì€ í¬ì¸íŠ¸
    */
    GiftPoint consume(final ConsumptionPoint point){
        if(!isEnough(point)){
            throw new IllegalArgumentException("í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
        }

        return new GiftPoint(value - point.value);
    }
}

GiftPoint standardMembershipPoint = new GiftPoint(3000);
GiftPoint premiumMembershipPoint = new GiftPoint(10000);
```
ğŸš¨ ìƒì„±ìë¥¼ publicìœ¼ë¡œ ë§Œë“¤ë©´, ì˜ë„ì¹˜ ì•Šì€ ìš©ë„ì˜ ì‚¬ìš©ìœ¼ë¡œ ê´€ë ¨ëœ ë¡œì§ì´ ë¶„ì‚°ë˜ì–´ ìœ ì§€ë³´ìˆ˜ê°€ í˜ë“¤ì–´ ì§ˆ ìˆ˜ ìˆìŒ

â­ private ìƒì„±ì + íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ëª©ì ì— ë”°ë¼ ì´ˆê¸°í™”
```java
class GiftPoint{
    private static final int MIN_POINT = 0;
    private static final int STANDARD_MEMBERSHIP_POINT = 3000;
    private static final int PREMIUM_MEMBERSHIP_POINT = 10000;

    private GiftPoint(final int point){
        if(point < MIN_POINT){
            throw new IllegalArgumentException("í¬ì¸íŠ¸ëŠ” 0ì´ìƒ ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }

        value = point;
    }

    /**
     * @return í‘œì¤€ ê°€ì… ê¸°í”„íŠ¸ í¬ì¸íŠ¸
    */
    static GiftPoint forStandardMembership(){
        return new GiftPoint(STANDARD_MEMBERSHIP_POINT);
    }

    /**
     * @return í”„ë¦¬ë¯¸ì—„ ê°€ì… ê¸°í”„íŠ¸ í¬ì¸íŠ¸
    */
    static GiftPoint forPremiumMembership(){
        return new GiftPoint(PREMIUM_MEMBERSHIP_POINT);
    }
}

GiftPoint standardMembershipPoint = GiftPoint.forStandardMembership();
GiftPoint premiumMembershipPoint = GiftPoint.forPremiumMembership();
```

ğŸš¨ ìƒì„± ë¡œì§ì´ ë„ˆë¬´ ë§ì•„ì§€ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì˜ í•˜ëŠ” ì¼ì´ ë¶ˆë¶„ëª…í•´ì§€ë¯€ë¡œ, ìƒì„± ì „ìš© íŒ©í† ë¦¬ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤

### 5.3 ë²”ìš© ì²˜ë¦¬ í´ë˜ìŠ¤(Common/Util)
```java
class Common{
    // ìƒëµ

    static BigDecimal calcAmountIncludingTax(BigDecimal amountExcludingTax, BigDecimal taxRate){
        return amountExcludingTax.multiply(taxRate);
    }
}
```

```java
class AmountIncludingTax{
    final BigDecimal value;

    AmountIncludingTax(final AmountExcludingTax amountExcludingTax, final TaxRate taxRate){
        value = amountExcludingTax.value.multiply(taxRate.value);
    }
}
```

â­ ê¼­ í•„ìš”í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´, ë²”ìš© ì²˜ë¦¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŒ
â†’ íš¡ë‹¨ ê´€ì‹¬ì‚¬ì™€ ê°™ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë™ì‘ì— í•„ìš”í•œ ê¸°ëŠ¥ì€ ë²”ìš© ì½”ë“œë¡œ ë§Œë“¤ì–´ë„ ì¢‹ìŒ
* ë¡œê·¸ ì¶œë ¥
* ì˜¤ë¥˜ í™•ì¸
* ë””ë²„ê¹…
* ì˜ˆì™¸ ì²˜ë¦¬
* ìºì‹œ
* ë™ê¸°í™”
* ë¶„ì‚° ì²˜ë¦¬ ë“±


### 5.4 ê²°ê³¼ë¥¼ ë¦¬í„´í•˜ëŠ” ë° ë§¤ê°œë³€ìˆ˜ ì‚¬ìš©í•˜ì§€ ì•Šê¸°
â­ ë§¤ê°œë³€ìˆ˜ëŠ” ì…ë ¥ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 
â†’ ì¶œë ¥ ë§¤ê°œë³€ìˆ˜ ì‚¬ìš© ì‹œ, ë§¤ê°œë³€ìˆ˜ê°€ ì…ë ¥ì¸ì§€ ì¶œë ¥ì¸ì§€ ë©”ì„œë“œ ë‚´ë¶€ì˜ ë¡œì§ì„ í™•ì¸í•´ì•¼ í•¨

```java
class ActorManager{
    void shift(Location location, int shiftX, int shiftY){
        location.x += shiftX;
        location.y += shiftY;
    }
}
```

```java
class Location{
    final int x;
    final int y;

    Location(final int x, final int y){
        this.x = x;
        this.y = y;
    }

    Location shift(final int shiftX, final int shiftY){
        final int nextX = x + shiftX;
        final int nextY = y + shiftY;

        return new Location(nextX, nextY);
    }
}
```

### 5.5 ë§¤ê°œë³€ìˆ˜ê°€ ë„ˆë¬´ ë§ì€ ê²½ìš°
```java
/**
 * ë§¤ì§ í¬ì¸íŠ¸ íšŒë³µí•˜ê¸°
 * @param currentMagicPoint í˜„ì¬ ë§¤ì§í¬ì¸íŠ¸ ì”ëŸ‰
 * @param originalMaxMagicPoint ì›ë˜ ë§¤ì§í¬ì¸íŠ¸ ìµœëŒ“ê°’
 * @param maxMagicPointIncrements ì¥ë¹„ë¡œ ì¦ê°€í•˜ëŠ” ë§¤ì§í¬ì¸íŠ¸ ìµœëŒ“ê°’ ì¦ê°€ëŸ‰
 * @param recoveryAMount íšŒë³µëŸ‰
 * @return íšŒë³µ í›„ì˜ ë§¤ì§í¬ì¸íŠ¸ ì”ëŸ‰
*/
int recoverMagicPoint(int currentMagicPoint, int originalMaxMagicPoint, List<Integer> maxMagicPointIncrements, int recoveryAmount){
    int currentMaxMagicPoint = originalMaxMagicPoint;
    for(int each : maxMagicPointIncrements){
        currentMaxMagicPoint += each;
    }

    return Math.min(currentMagicPoint, recoveryAmount, currentMaxMagicPoint);
}
```

â­ ê°œë…ì ìœ¼ë¡œ ì˜ë¯¸ ìˆëŠ” ë‹¨ìœ„ëŠ” ëª¨ë‘ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ê¸°
â†’ ë§¤ê°œë³€ìˆ˜ê°€ ì•„ë‹ˆë¼ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ í‘œí˜„í•˜ê¸°
```java
class MagicPoint{
    private int currentAmount;
    private int originalMaxAmount;
    private final List<Integer> maxIncrements;

    /**
     * @return í˜„ì¬ ë§¤ì§ í¬ì¸íŠ¸ ì”ëŸ‰
    */
    int current(){
        return currentAmount;
    }

    /**
     * @return ë§¤ì§ í¬ì¸íŠ¸ ìµœëŒ“ê°’
    */
    int max(){
        int amount = originalMaxAmount;
        for(int each : maxIncrements){
            amount += each;
        }

        return amount;
    }

    /**
     * ë§¤ì§ í¬ì¸íŠ¸ íšŒë³µí•˜ê¸°
     * @param recoveryAmount íšŒë³µëŸ‰
    */
    void recover(final int recoveryAmount){
        currentAmount = Math.min(currentAmount + recoveryAmount, max());
    }

    /**
     * ë§¤ì§ í¬ì¸íŠ¸ ì†Œë¹„í•˜ê¸°
     * @param consumeAmount ì†Œë¹„ëŸ‰
    */
    void consume(final int consumeAmount){...}
}
```

### 5.6 ë©”ì„œë“œ ì²´ì¸
```java
/**
 * ê°‘ì˜· ì…ê¸°
 * @param memberId ì¥ë¹„ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ì€ ë©¤ë²„ì˜ ID
 * @param newArmor ì…ì„ ê°‘ì˜·
*/
void equipArmor(int memberId, Armor newArmor){
    if(party.members[memberId].equipments.canChange){
        party.members[memberId].equipments.armor = newArmor;
    }
}
```

â­ ìƒì„¸í•œ ë¡œì§ì€ í˜¸ì¶œí•˜ëŠ” ìª½ì´ ì•„ë‹ˆë¼, í˜¸ì¶œë˜ëŠ” ìª½ì— êµ¬í˜„í•˜ê¸°
```java
/**
 * ì¥ë¹„í•˜ê³  ìˆëŠ” ë°©ì–´êµ¬ ëª©ë¡
*/
class Equipments{
    private boolean canChange;
    private Equipment head;
    private Equipment armor;
    private Equipment arm;

    /**
     * ê°‘ì˜· ì¥ë¹„í•˜ê¸°
     * 
     * @param newArmor ì¥ë¹„í•  ê°‘ì˜·
    */
   void equipArmor(final Equipment newArmor){
    if(canChange){
        armor = newArmor;
    }
   }

    /**
     * ì „ì²´ ì¥ë¹„ í•´ì œí•˜ê¸°
    */
    void deactiveAll(){
        head = Equipment.EMPTY;
        armor = Equipment.EMPTY;
        arm = Equipment.EMPTY;
    }
}
```

## 6ì¥ ì¡°ê±´ ë¶„ê¸°: ë¯¸ê¶ì²˜ëŸ¼ ë³µì¡í•œ ë¶„ê¸° ì²˜ë¦¬ë¥¼ ë¬´ë„ˆëœ¨ë¦¬ëŠ” ë°©ë²•
### 6.1 ì¡°ê±´ ë¶„ê¸°ê°€ ì¤‘ì²©ë˜ì–´ ë‚®ì•„ì§€ëŠ” ê°€ë…ì„±
```java
if(0 < member.hitPoint){
    if(member.canAct()){
        if(magic.costMagicPoint <= member.magicPoint){
            member.consumeMagicPoint(magic.costMagicPoint);
            member.chant(magic);
        }
    }
}
```

â­ ì¡°ê¸° ë¦¬í„´ìœ¼ë¡œ ì¤‘ì²© ì œê±°í•˜ê¸°
```java
if(member.hitPoint <= 0) return;

if(member.canAct()){
    if(magic.costMagicPoint <= member.magicPoint){
        member.consumeMagicPoint(magi.costMagicPoint);
        member.chant(magic);
    }
}
```

```java
if(member.hitPoint <= 0){
    return;
}
if(!member.canAct()){
    return;
}
if(member.magicPoint < magic.costMagicPoint){
    return;
}
member.consumeMagicPoint(magic.costMagicPoint);
member.chant(magic);
```

```java
float hitPointRate = member.hitPoint / member.maxHitPoint;

HealthCondition currentHealthCondition;
if(hitPointRate == 0){
    currentHealthCondition = HealthCondition.dead;
}
else if(hitPointRate < 0.3){
    currentHealthCondition = HealthCondition.danger;
}
else if(hitPointRate < 0.5){
    currentHealthCondition = HealthCondition.caution;
}
else{
    currentHealthCondition = HealthCondition.fine;
}

return currentHealthCondition;
```

â­ ê°€ë…ì„±ì„ ë‚®ì¶”ëŠ” else êµ¬ë¬¸ë„ ì¡°ê¸° ë¦¬í„´ìœ¼ë¡œ í•´ê²°í•˜ê¸°
```java
float hitPointRate = member.hitPoint / member.maxHitPoint;

if(hitPoint == 0){
    return HealthCondition.dead;
}
else if(hitPoint < 0.3){
    return HealthCondition.danger;
}
else if(hitPoint < 0.5){
    return HealthCondition.caution;
}
else{
    return HealthCondition.fine;
}
```

```java
float hitPointRate = member.hitPoint / member.maxHitPoint;

if(hitPoint == 0){
    return HealthCondition.dead;
}
if(hitPoint < 0.3){
    return HealthCondition.danger;
}
if(hitPoint < 0.5){
    return HealthCondition.caution;
}

return HealthCondition.fine;
```

### 6.2 switch ì¡°ê±´ë¬¸ ì¤‘ë³µ
â­ switch ì¡°ê±´ë¬¸ ì¤‘ë³µì„ í•´ì†Œí•˜ë ¤ë©´, ë‹¨ì¼ ì±…ì„ ì„ íƒì˜ ì›ì¹™ì„ ìƒê°í•´ì•¼ í•¨  
= ì¡°ê±´ì‹ì´ ê°™ì€ ì¡°ê±´ ë¶„ê¸°ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‘ì„±í•˜ì§€ ë§ê³  í•œ ë²ˆì— ì‘ì„±í•´ì•¼ í•¨

```java
class Magic{
    final String name;
    final int costMagicPoint;
    final int attackPower;
    final int costTechnicalPoint;

    Magic(final MagicType magicType, final Member member){
        switch(magicType){
            case fire:
                name = "íŒŒì´ì–´";
                costMagicPoint = 2;
                attackPower = 20 + (int)(member.level * 0.5);
                costTechnicalPoint = 0;
                break;
            case lightning:
                name = "ë²ˆê°œ";
                costMagicPoint = 5 + (int)(member.level * 0.2);
                attackPower = 50 + (int)(member.level * 1.5);
                costTechnicalPoint = 5;
                break;
            case hellFire:
                name = "í—¬íŒŒì´ì–´";
                costMagicPoint = 16;
                attackPower = 200 + (int)(member.magicAttack * 0.5 + member.vitality * 2);
                costTechnicalPoint = 20 + (int)(member.level * 0.4);
                break;
            default:
                throw new IllegalArgumentException();
        }
    }
}
```

â­ ì¸í„°í˜ì´ìŠ¤ë¡œ switch ì¡°ê±´ë¬¸ ì¤‘ë³µ í•´ì†Œí•˜ê¸°
```java
interface Shape{
    double area();
}

class Rectangle implements Shape{
    private final double width;
    private final double height;

    public double area(){
        return width * height;
    }
}

class Circle implements Shape{
    private final double radius;

    public double area(){
        return radius * radius * Math.PI;
    }
}

Shape shape = new Circle(10);
System.out.println(shape.area());
shape = new Rectangle(20, 25);
System.out.println(shape.area());
```
ğŸ¤“ ê°™ì€ ìë£Œí˜•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì´ìœ¼ë¯€ë¡œ ìë£Œí˜• íŒì •ì„ í•˜ì§€ ì•Šì•„ë„ ë¨  
â­ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´, ì¡°ê±´ ë¶„ê¸°ë¥¼ ë”°ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³ ë„ ê°ê°ì˜ ì½”ë“œë¥¼ ì ì ˆíˆ ì‹¤í–‰ í•  ìˆ˜ ìˆìŒ

```java
interface Magic{
    String name();
    int costMagicPoint();
    int attachPower();
    int costTechnicalPoint();
}

class Fire implements Magic{
    private final Member member;

    Fire(final Member member){
        this.member = member;
    }

    public String name(){
        return "íŒŒì´ì–´";
    }

    public int costMagicPoint(){
        return 2;
    }

    public int attackPoint(){
        return 20 + (int)(member.level * 0.5);
    }

    public int costTechnicalPoint(){
        return 0;
    }
}

class Lightning implements Magic{
    private final Member member;

    Lightning(final Member member){
        this.member = member;
    }

    public String name(){
        return "ë²ˆê°œ";
    }

    public int costMagicPoint(){
        return 5 + (int)(member.level * 0.2);
    }

    public int attackPoint(){
        return 50 + (int)(member.level * 1.5);
    }

    public int costTechnicalPoint(){
        return 5;
    }
}

class HellFire implements Magic{
    private final Member member;

    HellFire(final Member member){
        this.member = member;
    }

    public String name(){
        return "í—¬íŒŒì´ì–´";
    }

    public int costMagicPoint(){
        return 16;
    }

    public int attackPoint(){
        return 200 + (int)(member.magicAttack * 0.5 + member.vitality * 2);
    }

    public int costTechnicalPoint(){
        return 20 + (int)(member.level * 0.4);
    }
}
```

â­ switch ì¡°ê±´ë¬¸ì´ ì•„ë‹ˆë¼, Mapìœ¼ë¡œ ë³€ê²½í•˜ê¸°
```java
final Map<MagicType, Magic> magics = new HashMap<>();

final Fire fire = new Fire(member);
final Lightning lightning = new Lightning(member);
final HellFire hellFire = new HellFire(member);

magics.put(MagicType.fire, fire);
magics.put(MagicType.lightning, lightning);
magics.put(MagicType.hellFire, hellFire);

void magicAttack(final MagicType magicType){
    final Magic usingMagic = magics.get(magicType);

    showMagicName(usingMagic);
    consumeMagicPoint(usingMagic);
    consumeTechnicalPoint(usingMagic);
    magicDamage(usingMagic);
}

void showMagicName(final Magic magic){
    final String name = magic.name();
}

void consumeMagicPoint(final Magic magic){
    final int costMagicPoint = magic.costMagicPoint();
}

void consumeTechnicalPoint(final Magic magic){
    final int costTechnicalPoint = magic.costTechnicalPoint();
}

void magicDamage(final Magic magic){
    final int attachPower = magic.attackPower();
}
```

â­ ê¸°ë³¸ ìë£Œí˜•ì„ ë¦¬í„´í•  ê²½ìš°, ì‹¤ìˆ˜ë¡œ ì˜ë¯¸ê°€ ë‹¤ë¥¸ ê°’ì„ ì „ë‹¬í•  ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë¯€ë¡œ ê°’ ê°ì²´ë¥¼ í™œìš©
```java
interface Magic{
    String name();
    MagicPoint costMagicPoint();
    AttackPower attackPower();
    TechnicalPoint costTechnicalPoint();
}

class Fire implements Magic{
    private final Member member;

    Fire(final Member member){
        this.member = member;
    }

    public String name(){
        return "íŒŒì´ì–´";
    }

    public MagicPoint costMagicPoint(){
        return new MagicPoint(2);
    }

    public AttackPower attackPoint(){
        final int value = 20 + (int)(member.level * 0.5);
        return AttackPower(value);
    }

    public TechnicalPoint costTechnicalPoint(){
        return new TechnicalPoint(0);
    }
}

class Lightning implements Magic{
    private final Member member;

    Lightning(final Member member){
        this.member = member;
    }

    public String name(){
        return "ë²ˆê°œ";
    }

    public MagicPoint costMagicPoint(){
        final int value = 5 + (int)(member.level * 0.2);
        return new MagicPoint(value);
    }

    public AttackPoint attackPoint(){
        final int value = 50 + (int)(member.level * 1.5);
        return new AttackPoint(value);
    }

    public TechnicalPoint costTechnicalPoint(){
        return new TechnicalPoint(5);
    }
}

class HellFire implements Magic{
    private final Member member;

    HellFire(final Member member){
        this.member = member;
    }

    public String name(){
        return "í—¬íŒŒì´ì–´";
    }

    public MagicPoint costMagicPoint(){
        return new MagicPoint(16);
    }

    public AttackPoint attackPoint(){
        final int value = 200 + (int)(member.magicAttack * 0.5 + member.vitality * 2);
        return new AttackPoint(value);
    }

    public TechnicalPoint costTechnicalPoint(){
        final int value = 20 + (int)(member.level * 0.4);
        return new TechnicalPoint(value);
    }
}
```

### 6.3 ì¡°ê±´ ë¶„ê¸° ì¤‘ë³µê³¼ ì¤‘ì²©
```java
/**
 * @return ê³¨ë“œ íšŒì›ì´ë¼ë©´ true;
 * @param history êµ¬ë§¤ ì´ë ¥
*/
boolean isGoldCustomer(PurchaseHistory history){
    if(1000000 <= history.totalAmount){
        if(10 <= history.purchaseFrequencyPerMonth){
            if(history.returnRate <= 0.001){
                return true;
            }
        }
    }
    return false;
}

/**
 * @return ì‹¤ë²„ íšŒì›ì´ë¼ë©´ true
 * @param history êµ¬ë§¤ ì´ë ¥
*/
boolean isSliverCustomer(PurchaseHistory history){
    if(10 <= history.purchaseFrequencyPerMonth){
        if(history.returnRate <= 0.001){
            return true;
        }
    }
    return false;
}
```

â­ ì •ì±… íŒ¨í„´: ì¡°ê±´ì„ ë¶€í’ˆì²˜ëŸ¼ ë§Œë“¤ê³ , ë¶€í’ˆìœ¼ë¡œ ë§Œë“  ì¡°ê±´ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´
```java
interface ExcellentCustomerRule{
    /**
     * @param history êµ¬ë§¤ ì´ë ¥
     * @return ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°, true
    */
    boolean ok(final PurchaseHistory history);
}

class GoldCustomerPurchaseAmountRule implements ExcellentCustomerRule{
    public boolean ok(final PurchaseHistory history){
        return 1000000 <= history.totalAmount;
    }
}

class PurchaseFrequencyRule implements ExcellentCustomerRule{
    public boolean ok(final PurchaseHistory history){
        return 10 <= history.purchaseFrequencyPerMonth;
    }
}

class ReturnRateRule implements ExcellentCustomerRule{
    public boolean ok(final PurchaseHistory history){
        return history.returnRate <= 0.001;
    }
}

class ExcellentCustomerPolicy{
    private final Set<ExcellentCustomerRule> rules;

    ExcellentCustomerPolicy(){
        rules = new HashSet();
    }

    /**
     * ê·œì¹™ ì¶”ê°€
     * 
     * @param rule ê·œì¹™ ì¶”ê°€
    */
    void add(final ExcellentCustomerRule rule){
        rules.add(rule);
    }

    /**
     * @param history êµ¬ë§¤ ì´ë ¥
     * @return ê·œì¹™ì„ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ê²½ìš° true
    */
    void complyWithAll(final PurchaseHistory history){
        for(ExcellentCustomerRule each : rules){
            if(!each.ok(history)){
                return false;
            }
            return true;
        }
    }
}
```

```java
ExcellentCustomerPolicy goldCustomerPolicy = new ExcellentCustomerPolicy();

goldCustomerPolicy.add(new GoldCustomerPurchaseAmountRule());
goldCustomerPolicy.add(new PurchaseFrequencyRule());
goldCustomerPolicy.add(new ReturnRateRule());

goldCustomerPolicy.complyWithAll(purchaseHistory);
```

â­ í´ë˜ìŠ¤ë¥¼ í™œìš©í•´ ê³¨ë“œ íšŒì›ê³¼ ë¬´ê´€í•œ ë¡œì§ì´ ì‚½ì…ë  ê°€ëŠ¥ì„±ì„ ë‚®ì¶¤
```java
class GoldCustomerPolicy{
    private final ExcellentCustomerPolicy policy;

    GoldCustomerPolicy(){
        policy = new ExcellentCustomerPolicy();

        policy.add(new GoldCustomerPurchaseAmountRule());
        policy.add(new PurchaseFrequencyRule());
        policy.add(new ReturnRateRule());
    }

    /**
     * @param history êµ¬ë§¤ ì´ë ¥
     * @return ê·œì¹™ì„ ëª¨ë‘ ë§Œì¡±í•  ê²½ìš°, true
    */
    boolean complyWithAll(final PurchaseHistory history){
        return policy.complyWithAll(history);
    }
}
class SliverCustomerPolicy{
    private final ExcellentCustomerPolicy policy;

    SliverCustomerPolicy(){
        policy = new ExcellentCustomerPolicy();

        policy.add(new GoldCustomerPurchaseAmountRule());
        policy.add(new PurchaseFrequencyRule());
        policy.add(new ReturnRateRule());
    }

    /**
     * @param history êµ¬ë§¤ ì´ë ¥
     * @return ê·œì¹™ì„ ëª¨ë‘ ë§Œì¡±í•  ê²½ìš°, true
    */
    boolean complyWithAll(final PurchaseHistory history){
        return policy.complyWithAll(history);
    }
}
```

### 6.4 ìë£Œí˜• í™•ì¸ì— ì¡°ê±´ ë¶„ê¸° ì‚¬ìš©í•˜ì§€ ì•Šê¸°
```java
interface HotelRates{
    Money fee();
}

class RegularRate implements HotelRates{
    public Money fee(){
        return new Money(70000);
    }
}
class PremiumRate implements HotelRates{
    public Money fee(){
        return new Money(120000);
    }
}

Money busySeasonFee;
if(hotelRates instanceof RegularRates){
    busySeasonFee = hotelRates.fee().add(new Money(30000));
}
if(hotelRates instanceof PremiumRates){
    busySeasonFee = hotelRates.fee().add(new Money(30000));
}
```
ğŸš¨ ê¸°ë°˜ ìë£Œí˜•ì„ í•˜ìœ„ ìë£Œí˜•ìœ¼ë¡œ ë³€ê²½í•´ë„, ì½”ë“œëŠ” ë¬¸ì œì—†ì´ ë™ì‘í•´ì•¼ í•œë‹¤ëŠ” ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ ìœ„ë°˜  
â†’ ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ì„ ìœ„ë°˜í•˜ë©´ ìë£Œí˜• íŒì •ì„ ìœ„í•œ ì¡°ê±´ ë¶„ê¸° ì½”ë“œê°€ ì ì  ë§ì•„ì ¸ ìœ ì§€ ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§


```java
interface HotelRates{
    Money fee();
    Money busySeasonFee();
}

class RegularRate implements HotelRates{
    public Money fee(){
        return new Money(70000);
    }

    public Money busySeasonFee(){
        return fee().add(new Money(30000))
    }
}
class PremiumRate implements HotelRates{
    public Money fee(){
        return new Money(120000);
    }

    public Money busySeasonFee(){
        return fee().add(new Money(50000))
    }
}
```

### 6.5 ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš© ëŠ¥ë ¥ì´ ì¤‘ê¸‰ìœ¼ë¡œ ì˜¬ë¼ê°€ëŠ” ì²«ê±¸ìŒ
||ì´ˆë³´ì|ì¤‘ê¸‰ì ì´ìƒ|
|------|---|---|
|ë¶„ê¸°|if ì¡°ê±´ë¬¸ê³¼ switch ì¡°ê±´ë¬¸ë§Œ ì‚¬ìš©|ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ ì‚¬ìš©|
|ë¶„ê¸°ë§ˆë‹¤ì˜ ì²˜ë¦¬|ë¡œì§ì„ ê·¸ëƒ¥ ì‘ì„±|í´ë˜ìŠ¤ ì‚¬ìš©|

### 6.6 í”Œë˜ê·¸ ë§¤ê°œë³€ìˆ˜
```java
damage(true, damageAmount);

void damage(boolean damageFlag, int damageAmount){
    if(damageFlag == true){
        member.hitPoint -= damageAmount;
        if(0 < member.hitPoint){return;}

        member.hitPoint = 0;
        member.addState(StateType.dead);
    }
    else{
        member.magicPoint -= damageAmount;
        if(0 <member.magicPoint){return;}

        member.magicPoint = 0;
    }
}
```

â­ ë©”ì„œë“œëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ í•˜ë„ë¡ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ  
= ê¸°ëŠ¥ë³„ë¡œ ë‚˜ëˆ„ê³ , ê°ê°ì˜ ë©”ì„œë“œì— ë§ëŠ” ì´ë¦„ì„ ë¶™ì´ë©´ ê°€ë…ì„±ì´ ë†’ì•„ì§
```java
void hitPointDamage(final int damageAmount){
    member.hitPoint -= damageAmount;
    if(0 < member.hitPoint){return;}

    member.hitPoint = 0;
    member.addState(StateType.dead);
}
void magicPointDamage(final int damageAmount){
    member.magicPoint -= damageAmount;
    if(0 <member.magicPoint){return;}

    member.magicPoint = 0;    
}
```

ğŸ¥¸ í”Œë˜ê·¸ ë§¤ê°œë³€ìˆ˜ë¥¼ ëŒ€ì²´í•˜ëŠ” ì „ëµ íŒ¨í„´
```java
interface Damage{
    void execute(final int damageAmount);
}

class HitPointDamage implements Damage{
    // ìƒëµ

    public void execute(final int damageAmount){
        member.hitPoint -= damageAmount;
        if(0 < member.hitPoint){return;}

        member.hitPoint = 0;
        member.addState(StateType.dead);
    }
}

class MagicPointDamage implements Damage{
    // ìƒëµ

    public void execute(final int damageAmount){
        member.magicPoint -= damageAmount;
        if(0 <member.magicPoint){return;}

        member.magicPoint = 0;  
    }
}

enum DamageType{
    hitPoint
    , magicPoint
}

private final Map<DamageType, Damage> damages;

void applyDamage(final DamageType damageType, final int damageAmount){
    final Damage damage = damages.get(damageType);
    damage.execute(damageAmount);
}

applyDamage(DamageType.magicPoint, damageAmount);
```



## 7ì¥ ì»¬ë ‰ì…˜: ì¤‘ì²©ì„ ì œê±°í•˜ëŠ” êµ¬ì¡°í™” í…Œí¬ë‹‰
### 7.1 ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê¸°ëŠ¥ì„ ë‹¤ì‹œ êµ¬í˜„í•˜ì§€ ë§ê¸°
```java
boolean hasPrisonKey = false;
for(Item each : items){
    if(each.name.equals("ê°ì˜¥ ì—´ì‡ ")){
        hasPrisonKey = true;
        break;
    }
}
```
```java
boolean hasPrisonKey = items.stream().anyMatch(
    item -> item.name.equals("ê°ì˜¥ ì—´ì‡ ");
)
```

### 7.2 ë°˜ë³µ ì²˜ë¦¬ ë‚´ë¶€ì˜ ì¡°ê±´ ë¶„ê¸° ì¤‘ì²©
â­ ì¡°ê¸° ì»¨í‹°ë‰´ë¡œ ì¡°ê±´ ë¶„ê¸° ì¤‘ì²© ì œê±°í•˜ê¸°
```java
for(Member member : members){
    if(0 < member.hitPoint){
        if(member.containsState(StateType.poison)){
            member.hitPoint -= 10;

            if(member.hitPoint <= 0){
                member.hitPoint = 0;
                member.addState(StateType.dead);
                member.removeState(StateType.poison);
            }
        }
    }
}
```

```java
for(Member member : members){
    if(member.hitPoint == 0){
        continue;
    }

    if(member.containsState(StateType.poison)){
        member.hitPoint -= 10;

        if(member.hitPoint <= 0){
            member.hitPoint = 0;
            member.addState(StateType.dead);
            member.removeState(StateType.poison);
        }
    }
}
```

```java
for(Member member : members){
    if(member.hitPoint == 0){
        continue;
    }
    if(!member.containsState(StateType.poison)){
        continue;
    }

    if(0 < member.hitPoint){
        continue;
    }

    member.hitPoint = 0;
    member.addState(StateType.dead);
    member.removeState(StateType.poison);
}
```

â­ ì¡°ê¸° ë¸Œë ˆì´í¬ë¡œ ì¤‘ì²© ì œê±°í•˜ê¸°
```java
int totalDamage = 0;

for(Member member : members){
    if(member.hasTeamAttackSucceeded()){
        int damage = (int)(member.attack() * 1.1);

        if(30 <= damage){
            totalDamage += damage;
        }
        else{
            break;
        }
    }
    else{
        break;
    }
}
```

```java
int totalDamage = 0;

for(Member member : members){
    if(!member.hasTeamAttackSucceeded()){
        break;
    }

    int damage = (int)(member.attack() * 1.1);

    if(damage < 30){
        break;
    }

    totalDamage += damage;
}
```

### 7.3 ì‘ì§‘ë„ê°€ ë‚®ì€ ì»¬ë ‰ì…˜ ì²˜ë¦¬
```java
class FieldManager{
    void addMember(List<Member> members, Member newMember){
        if(members.stream().anyMatch(member -> member.id == newMemberId)){
            throw new RuntimeException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë©¤ë²„ì…ë‹ˆë‹¤.");
        }
        
        if(members.size() == MAX_MEMBER_COUNT){
            throw new RuntimeException("ì´ ì´ìƒ ë©¤ë²„ë¥¼ ì¶”ê°€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        members.add(newMember);
    }

    boolean partyIsAlive(List<Member> members){
        return members.stream().anyMatch(member -> member.isAlive());
    }
}
```

â­ ì»¬ë ‰ì…˜ê³¼ ê´€ë ¨ëœ ì‘ì§‘ë„ê°€ ë‚®ì•„ì§€ëŠ” ë¬¸ì œëŠ” ì¼ê¸‰ ì»¬ë ‰ì…˜ íŒ¨í„´ì„ ì‚¬ìš©í•´ í•´ê²° í•  ìˆ˜ ìˆìŒ
* ì»¬ë ‰ì…˜ ìë£Œí˜•ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜
* ì»¬ë ‰ì…˜ ìë£Œí˜•ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì˜ëª»ëœ ê°’ì´ í• ë‹¹ë˜ì§€ ì•Šê²Œ ë§‰ê³ , ì •ìƒì ìœ¼ë¡œ ì¡°ì‘í•˜ëŠ” ë©”ì„œë“œ


```java
class Party{
    static final int MAX_MEMBER_COUNT = 4;
    private final List<Member> members;

    Party(){
        members = new ArrayList<Member>();
    }

    /**
     * ë©¤ë²„ ì¶”ê°€í•˜ê¸°
     * @param newMember ì¶”ê°€í•˜ê³  ì‹¶ì€ ë©¤ë²„
     * @return ë©¤ë²„ë¥¼ ì¶”ê°€í•œ íŒŒí‹°
    */
    Party add(final Member newMember){
        if(exists(newMember)){
            throw new RuntimeException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë©¤ë²„ì…ë‹ˆë‹¤.");
        }
        if(isFull()){
            throw new RuntimeException("ì´ ì´ìƒ ë©¤ë²„ë¥¼ ì¶”ê°€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        final List<Member> adding = new ArrayList<>(members);
        adding.add(newMember);
        return new Party(adding);
    }

    /**
     * @return íŒŒí‹° ë©¤ë²„ê°€ 1ëª…ì´ë¼ë„ ì‚´ì•„ ìˆìœ¼ë©´ trueë¥¼ ë¦¬í„´
    */
    boolean isAlive(){
        return members.stream().anyMatch(each -> each.isAlive());
    }

    /**
     * @param member íŒŒí‹°ì— ì†Œì†ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì‹¶ì€ ë§´ë²„
     * @return ì´ë¯¸ ì†Œì†ë˜ì–´ ìˆëŠ” ê²½ìš° trueë¥¼ ë¦¬í„´
    */
    boolean exists(final Member member){
        return members.stream().anyMatch(each -> each.Id == member.Id);
    }

    /**
     * @return íŒŒí‹° ì¸ì›ì´ ìµœëŒ€ì¼ ê²½ìš° trueë¥¼ ë¦¬í„´
    */
    boolean isFull(){
        return members.size() == MAX_MEMBER_COUNT;
    }

    List<Member> members(){
        return members;
    }
}
```
ğŸš¨ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ì™¸ë¶€ì— ì „ë‹¬í•˜ë©´, Party í´ë˜ìŠ¤ë¥¼ ì™¸ë¶€ì—ì„œ ë§ˆìŒëŒ€ë¡œ ë©¤ë²„ë¥¼ ì¶”ê°€í•˜ê³  ì œê±°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì»¬ë ‰ì…˜ ìš”ì†Œë¥¼ ë³€ê²½í•˜ì§€ ëª»í•˜ê²Œ ë§‰ì•„ë‘ì–´ì•¼ í•¨

```java
class Party{
    // ìƒëµ

    /**
     * @return ë©¤ë²„ ë¦¬ìŠ¤íŠ¸(ë‹¨, ìš”ì†Œë¥¼ ì™¸ë¶€ì—ì„œ ë³€ê²½í•  ìˆ˜ ì—†ìŒã„´)
    */
    List<Member> member(){
        return members.unmodifiableList();
    }
}
```



## 8ì¥ ê°•í•œ ê²°í•©: ë³µì¡í•˜ê²Œ ì–½í˜€ì„œ í’€ ìˆ˜ ì—†ëŠ” êµ¬ì¡°
### 8.1 ê²°í•©ë„ì™€ ì±…ë¬´
```java
class DiscountManager{
    List<Product> discountProducts;
    int totalPrice;

    /**
     * ìƒí’ˆ ì¶”ê°€í•˜ê¸°
     * 
     * @param product ìƒí’ˆ
     * @param productDiscount ìƒí’ˆ í• ì¸ ì •ë³´
     * @return ì¶”ê°€ì— ì„±ê³µí•˜ë©´ true
    */
    boolean add(Product product, ProductDiscount productDiscount){
        if(product.id < 0){
            throw new IllegalArgumentException();
        }
        if(product.name.isEmpty()){
            throw new IllegalArgumentException();
        }
        if(product.price < 0){
            throw new IllegalArgumentException();
        }
        if(product.id != productDiscount.id){
            throw new IllegalArgumentException();
        }

        int discountPrice = getDiscountPrice(product.price);

        int tmp;
        if(productDiscount.canDiscount){
            tmp = totalPrice + discountPrice;
        }
        else{
            tmp = totalPrice + product.price;
        }
        if(tmp <= 200000){
            totalPrice = tmp;
            discountProducts.add(product);
            
            return true;
        }
        else{
            return false;
        }
    }

    static int getDiscountPrice(int price){
        int discountPrice = price - 3000;
        if(discountPrice < 0){
            discountPrice = 0;
        }

        return discountPrice;
    }
}

class Product{
    int id;
    String name;
    int price;
}

class ProductDiscount{
    int id;
    boolean canDiscount;
}
```

â• ì¼ë°˜ í• ì¸ ì™¸ ì—¬ë¦„ í• ì¸ ì‚¬ì–‘ ì¶”ê°€
```java
class SummerDiscountManager{
    DiscountManager discountManager;

    /**
     * ìƒí’ˆ ì¶”ê°€í•˜ê¸°
     * 
     * @param product ìƒí’ˆ
     * @return ì¶”ê°€ì— ì„±ê³µí•˜ë©´ true
    */
    boolean add(Product product){
        if(product.id < 0){
            throw new IllegalArgumentException();
        }
        if(product.name.isEmpty()){
            throw new IllegalArgumentException();
        }

        int tmp;
        if(product.canDiscount){
            tmp = discountManager.totalPrice + DiscountManager.getDiscountPrice(product.price);
        }
        else{
            tmp = discountManager.totalPrice + product.price;
        }
        if(tmp <= 300000){
            discountManager.totalPrice = tmp;
            discountManager.discountProducts.add(product);
            
            return true;
        }
        else{
            return false;
        }    
}

class Product{
    int id;
    String name;
    int price;
    boolean canDiscount;
}
```
ğŸš¨ ë¬¸ì œì 
* DiscountManager, SummerDiscountManagerê°€ ìƒí’ˆ ì •ë³´ í™•ì¸ ì™¸ì—ë„ í• ì¸ ê°€ê²© ê³„ì‚° í• ì¸ ì ìš© ì—¬ë¶€ ë“± ë„ˆë¬´ ë§ì€ ì¼ì„ í•˜ê³  ìˆìŒ
* Productê°€ ì§ì ‘í•´ì•¼í•˜ëŠ” ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì´ DiscountManager, SummerDiscountManagerì— êµ¬í˜„
* ProductDiscount.canDiscount, Product.canDiscount ì´ë¦„ì´ ìœ ì‚¬í•´ ì–´ë–¤ ê²ƒì´ ì¼ë°˜ í• ì¸ì´ê³  ì—¬ë¦„ í• ì¸ì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ
* SummerDiscountManagerê°€ DiscountManagerì˜ ì¼ë°˜ ë„ì¸ ë¡œì§ì„ í™œìš©

â­ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì§€í‚¤ë„ë¡ ì„¤ê³„ ë³€ê²½
```java
class RegularPrice{
    private static final int MIN_AMOUNT = 0;
    final int amount;

    RegularPrice(final int amount){
        if(amount < MIN_AMOUNT){
            throw new IllegalArgumentException("ê°€ê²©ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }

        this.amount = amount;
    }
}

class RegularDiscountedPrice{
    private static final int MIN_AMOUNT = 0;
    private static final int DISCOUNT_AMOUNT = 4000;
    final int amount;

    RegularDiscountedPrice(final RegularPrice price){
        int discountedAmount = price.amount - DISCOUNT_AMOUNT;
        if(discountedAmount < MIN_AMOUNT){
            discountedAmount = MIN_AMOUNT;
        }
    }

    amount = discountedAmount;
}

class SummerDiscountedPrice{
    private static final int MIN_AMOUNT = 0;
    private static final int DISCOUNT_AMOUNT = 3000;
    final int amount;

    SummerDiscountedPrice(final RegularPrice price){
        int discountedAmount = price.amount - DISCOUNT_AMOUNT;
        if(discountedAmount < MIN_AMOUNT){
            discountedAmount = MIN_AMOUNT;
        }
    }

    amount = discountedAmount;
}
```
â­ ì¼ë°˜ í• ì¸ê³¼ ì—¬ë¦„ í• ì¸ì€ ì„œë¡œ ë‹¤ë¥¸ ê°œë…  
DRYëŠ” ê°ê°ì˜ ê°œë… ë‹¨ìœ„ ë‚´ì—ì„œ ë°˜ë³µì„ í•˜ì§€ ë§ë¼ëŠ” ì˜ë¯¸  
ê°™ì€ ë¡œì§, ë¹„ìŠ·í•œ ë¡œì§ì´ë¼ë„ ê°œë…ì´ ë‹¤ë¥´ë©´ ì¤‘ë³µì„ í—ˆìš©í•´ì•¼ í•¨  
ê°œë…ì ìœ¼ë¡œ ë‹¤ë¥¸ ê²ƒê¹Œì§€ë„ ë¬´ë¦¬í•˜ê²Œ ì¤‘ë³µì„ ì œê±°í•˜ë ¤ í•˜ë©´, ê°•í•œ ê²°í•© ìƒíƒœê°€ ë¨

### 8.2 ë‹¤ì–‘í•œ ê°•í•œ ê²°í•© ì‚¬ë¡€ì™€ ëŒ€ì²˜ ë°©ë²•
ğŸš¨ ìƒì†ì€ ì£¼ì˜í•´ì„œ ë‹¤ë£¨ì§€ ì•Šìœ¼ë©´, ê³§ë°”ë¡œ ê°•í•œ ê²°í•© êµ¬ì¡°ë¥¼ ìœ ë°œ
```java
class PhysicalAttack{
    int singleAttackDamage(){...}
    int doubleAttackDamage(){...}
}

class FighterPhysicalAttack extends PhysicalAttack{
    @Override
    int singleAttackDamage(){
        return super.singleAttackDamage() + 20;
    }

    @Override
    int doubleAttackDamage(){
        return super.doubleAttackDamage() + 10;
    }
}
```

â­ ìŠˆí¼ í´ë˜ìŠ¤ ì˜ì¡´ìœ¼ë¡œ ì¸í•œ ê°•í•œ ê²°í•©ì„ í”¼í•˜ë ¤ë©´ ìƒì†ë³´ë‹¤ ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ  
* ì»´í¬ì§€ì…˜ì´ë€ ì‚¬ìš©í•˜ê³  ì‹¶ì€ í´ë˜ìŠ¤ë¥¼ private ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ ê°–ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì˜ë¯¸
```java
class FighterPhysicalAttack{
    private final PhysicalAttack physicalAttack;

    int singleAttackDamage(){
        return physicalAttack.singleAttackDamage() + 20;
    }

    int doubleAttackDamage(){
        return physicalAttack.doubleAttackDamage() + 10;
    }    
}
```

ğŸš¨ ìŠˆí¼ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ë¬´ë¦¬í•˜ê²Œ ì¼ë°˜í™”í•˜ëŠ” ê²½ìš°
```java
abstract class DiscountBase{
    protected int price;

    int getDiscountedPrice(){
        int discountedPrice = price - 3000;
        if(discountedPrice < 0){
            discountedPrice = 0;
        }

        return discountedPrice;
    }
}

class RegularDiscount extends DiscountBase{
    @Override
    int getDiscountedPrice(){
        int discountedPrice = price - 4000;
        if(discountedPrice < 0){
            discountedPrice = 0;
        }

        return discountedPrice;
    }
}
```

```java
abstract class DiscountBase{
    // ìƒëµ

    int getDiscountedPrice(){
        int discountedPrice = price - discountCharge();
        if(discountedPrice < 0){
            discountedPrice = 0;
        }

        return discountedPrice;
    }

    protected int discountCharge(){
        return 3000;
    }
}

class RegularDiscount extends DiscountBase{
    @Override
    int discountCharge(){
        return 4000;
    }
}
```
* discountCharge ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ë ¤ë©´ ìŠˆí¼ í´ë˜ìŠ¤ì˜ getDiscountedPriceê°€ ì–´ë–¤ í˜•íƒœì˜ ë¡œì§ì¸ì§€ ì•Œì•„ì•¼ í•¨  
â†’ í•˜ë‚˜ì˜ ë¡œì§ìœ¼ë¡œ ë´ì•¼ í•˜ëŠ” íë¦„ì´ ë‘ í´ë˜ìŠ¤ì— ë¶„ì‚°ë˜ì–´ ìˆìŒ

```java
class SummerDiscount extends DiscountBase{
    @Override
    int getDiscountedPrice(){
        return (int)(price * (1.00 - 0.05));
    }
}
```
* ì„œë¸Œ í´ë˜ìŠ¤ ì¤‘ ì¼ë¶€ì™€ë§Œ ê´€ë ¨ëœ ë©”ì„œë“œê°€ ë“±ì¥í•˜ë©´ ì–´ë””ì„œë¶€í„° ì–´ë””ê¹Œì§€ ê´€ë ¨ìˆëŠ”ì§€ ë¡œì§ì„ ì¶”ì í•˜ê¸° ì–´ë ¤ì›€

```java
abstract class DiscountBase{
    // ìƒëµ

    int getDiscountedPrice(){
        if(this instanceof RegularDiscount){
            int discountedPrice = price - 4000
            if(discountedPrice < 0){
                discountedPrice = 0;
            }

            return discountedPrice;
        }
        else if(this instanceof SummerDiscount) {
            return (int)(price * (1.00 - 0.05));
        }
    }
}
```
ğŸš¨ ìƒì†ì€ ë‹¤ë¥¸ ë™ì‘ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì „ëµ íŒ¨í„´ ë“±ìœ¼ë¡œ ì¡°ê±´ ë¶„ê¸°ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë‚˜, ë¶„ê¸°ë¥¼ ì¤„ì´ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆìŒ  
ğŸš¨ ì¼ë°˜ í• ì¸ê³¼ ì—¬ë¦„ í• ì¸ ë¡œì§ì€ RegularDiscountì™€ SummerDiscountì— ìº¡ìŠí™”ë˜ì–´ìˆì–´ì•¼ í•¨  

â­ ìƒì†ì€ ë°˜ë“œì‹œ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì—¼ë‘ì— ë‘ê³  êµ¬í˜„  
â­ ê°’ ê°ì²´ì™€ ì»´í¬ì§€ì…˜ ë“± ë‹¤ë¥¸ ì„¤ê³„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ”ì§€ ë°˜ë“œì‹œ ê²€í† 

ğŸ«  ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë³„ë¡œ í´ë˜ìŠ¤ ë¶„í• 
```java
class Util{
    private int reservationId;
    private ViewSettings viewSettings;
    private MailMagazine mailMagazine;

    void cancelReservation(){
        // reservationIdë¥¼ ì‚¬ìš©í•œ ì˜ˆì•½ ì·¨ì†Œ ì²˜ë¦¬
    }

    void darkMode(){
        // viewSettingsë¥¼ ì‚¬ìš©í•œ ë‹¤í¬ ëª¨ë“œ í‘œì‹œ ì „í™˜ ì²˜ë¦¬
    }

    void beginSendMail(){
        // mailMagazineì„ ì‚¬ìš©í•œ ë©”ì¼ ì „ì†¡ ì²˜ë¦¬
    }
}
```

```java
class Reservation{
    private final int reservationId;

    void cancel(){...}
}
class ViewCustomizing{
    private final ViewSettings viewSettings;

    void darkMode(){...}
}
class MailMagazineService{
    private final MailMagazine mailMagazine;

    void beginSendMail(){...}
}
```

ğŸš¨ íŠ¹ë³„í•œ ì´ìœ ì—†ì´ public ì‚¬ìš©í•˜ì§€ ì•Šê¸°
```java
package rpg.objects;

public class HitPointRecovery{
    /**
     * @param chanter íšŒë³µ ë§ˆë²• ì‹œì „ì
     * @param targetMemberId íšŒë³µ ë§ˆë²•ì„ ë°›ëŠ” ë©¤ë²„ì˜ ID
     * @param positiveFeelings ë©¤ë²„ ê°„ì˜ í˜¸ê°ë„
    */
    public HitPointRecovery(final Member chanter, final int targetMemberId, final PositiveFeelings positiveFeelings){
        final int basicRecoverAmount = (int)(chanter.magicPower * MAGIC_POWER_COEFFICIENT) + (int)(chanter.affection * AFFECTION_COEFFICIENT * positiveFeelings.value(chanter.id, targetMemberId));
    }
}
```
```java
package rpg.objects;

/**
 * ë©¤ë²„ë“¤ì˜ í˜¸ê°ë„
 * subjectê°€ targetì—ê²Œ ê°€ì§€ëŠ” í˜¸ê°ë„ë¥¼ í™•ì¸í•˜ê±°ë‚˜, ì¦ê°€/ê°ì†Œì‹œí‚µë‹ˆë‹¤.
 * subjectIdì™€ targetIdëŠ” subject, targetê³¼ ê´€ë ¨ ìˆëŠ” ë©¤ë²„ì˜ Idë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
*/
public class PositiveFeelings{
    /**
     * @return í˜¸ê°ë„
     * @param subjectId í˜¸ê°ë„ë¥¼ í™•ì¸í•˜ê³  ì‹¶ì€ ë©¤ë²„ì˜ ID
     * @param targetId í˜¸ê° ëŒ€ìƒ ë©¤ë²„ì˜ ID
    */
   public int value(int subjectId, int targetId){...}

    /**
     * í˜¸ê°ë„ ì¦ê°€ì‹œí‚¤ê¸°
     * @param subjectId í˜¸ê°ë„ë¥¼ ì¦ê°€ì‹œí‚¤ê³ ì í•˜ëŠ” ë©¤ë²„ì˜ ID
     * @param targetId í˜¸ê° ëŒ€ìƒ ë©¤ë²„ì˜ ID
    */
   public int increase(int subjectId, int targetId){...}

    /**
     * í˜¸ê°ë„ ê°ì†Œì‹œí‚¤ê¸°
     * @param subjectId í˜¸ê°ë„ë¥¼ ê°ì†Œì‹œí‚¤ê³ ì í•˜ëŠ” ë©¤ë²„ì˜ ID
     * @param targetId í˜¸ê° ëŒ€ìƒ ë©¤ë²„ì˜ ID
    */
   public int decrease(int subjectId, int targetId){...}
}
```

ğŸš¨ ë‚´ë¶€ì—ì„œë§Œ ë‹¤ë£¨ê³  ì‹¶ì€ í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ í˜¸ì¶œí•˜ëŠ” ë¬¸ì œ
```java
package rpg.view;
import rpg.objects;

/**
 * ì „íˆ¬ í™”ë©´
*/
public class BattleView{
    // ìƒëµ

    /** ê³µê²© ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    public void startAttackAnimation(){
        // ìƒëµ
        positiveFeelings.increase(member1.id, member2.id);
    }
}
```

â­ íŒ¨í‚¤ì§€ê°„ì˜ ë¶ˆí•„ìš”í•œ ì˜ì¡´ ê´€ê³„ë¥¼ í”¼í•  ë•Œ, package privateê°€ ì ì ˆ  
íŒ¨í‚¤ì§€ëŠ” ë°€ì ‘í•œ í´ë˜ìŠ¤ë¥¼ ì‘ì§‘í•˜ê²Œ ì„¤ê³„í•˜ê³  ë°”ê¹¥ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ì™€ëŠ” ëŠìŠ¨í•˜ê²Œ ê²°í•©í•˜ë„ë¡ ì„¤ê³„

ğŸš¨ ê´€ë ¨ì´ ê¹Šë‹¤ê³  ìƒê°ë˜ëŠ” ë¡œì§ì„ í•œ ê³³ì— ëª¨ìœ¼ë ¤ê³  ê°•í•œ ê²°í•© êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ê²ƒì„ ìœ ì˜
```java
class SellingPrice{
    final int amount;

    SellingPrice(final int amount){
        if(amount < 0){
            throw new IllegalArgumentException("ê°€ê²©ì€ 0ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
        this.amount = amount;
    }

    int calcSellingCommission(){
        return (int)(amount * SELLING_COMMISSION_RATE);
    }

    int calcDeliveryCharge(){
        return DELIVERY_FREE_MIN <= amount ? 0 : 5000;
    }

    int calcShoppingPoint(){
        return (int)(amount * SHOPPING_POINT_RATE);
    }
}
```

```java
class SellingCommission{
    private static final float SELLING_COMMISSION_RATE = 0.05f;
    final int amount;

    SellingCommission(final SellingPrice sellingPrice){
        amount = (int)(sellingPrice.amount * SELLING_COMMISSION_RATE);
    }
}

class DeliveryCharge{
    private static final int DELIVERY_FREE_MIN = 20000;
    final int amount;

    DeliveryCharge(final SellingPrice sellingPrice){
        amount = DELIVERY_FREE_MIN <= sellingPrice.amount ? 0 : 5000;
    }
}

class ShoppingPoint{
    private static final float SHOPPING_POINT_RATE = 0.01f;
    final int value;

    ShoppingPoint(final SellingPrice sellingPrice){
        value = (int)(sellingPrice.amount * SHOPPING_POINT_RATE);
    }
}
```









































